---
title: 'JavaScript Events'
date: '2022-06-13'
---

# JavaScript イベント まとめ

* イベントとは、プログラムを書いているシステムで生じた動作、出来事
* イベントは、ブラウザーのウィンドウの中で発火される
* システムからあなたへ、イベントとして何かあった事を知らせてくる
* あるイベントが起きたときに、システムはある種の信号を発する
* 必要であればそれに何らかの反応を返す事ができる

* イベントリスナー：イベントの発生を監視
* イベントハンドラー：発火したイベントの応答として動作するコードブロック(通常はユーザー定義関数) 
* イベントの発火に対する応答としてコードのブロックが実行されるように定義する事を「イベントハンドラーを登録する」と言う
* イベントは、ブラウザに組み込まれた JavaScript API の一部として定義されたもの。Node.js のものとは異なる

[イベントへの入門 - MDN](https://developer.mozilla.org/ja/docs/Learn/JavaScript/Building_blocks/Events)


* onclick: クリック
* ondblclick: ダブルクリック 
* window.onkeypress/window.onkeydown/window.onkeyup: キーを 押す離す/押す/離す
* onmouseover/onmouseout: マウスポインタがオーバー/外れる
* onPointerMove マウスポインタが動く
* onfocus/onblur: 要素にフォーカス/外れる
* onSubmit
* onplay: 動画が再生される (video)

* インラインイベントハンドラーは使わない (読みづらくなり効率下がる)

### 登録方法

* イベントハンドラーHTML属性(ダメ): `<button onclick="bgChange()">Press me</button>`
* イベントハンドラープロパティ: `btn.onclick=bgChange()`
* イベントリスナー登録： `btn.addEventListener('click', bgChange)`
  - 利点1 リスナーを削除できる `btn.removeEventListener('click', bgChange);`
  - 利点2 同じリスナーに複数のハンドラーを登録できる

### イベントオブジェクトの標準的なプロパティとメソッド

### イベントのバブリングとキャプチャリング

キャプチャリング → バブリング

> なんだってキャプチャリングとバブリングなんてあるのか? それはね、むかーしむかしの悪き時代、ブラウザーに今ほど互換性がなかった頃、ネットスケープはキャプチャリングだけを、IE はバブリングだけを使っていたのさ。W3C が動作について標準化と合意を作ろうと決めた時、結局どっちもシステムに入れることにし、モダンブラウザーはそのように実装されたのさ。

* デフォルトでイベントハンドラーはバブリング段階に登録され、そしてほとんどの場合はこれが妥当
* キャプチャリング段階の方に登録したい場合、addEventListener() の第三引数に true を指定

#### イベントの移譲

* 複数ある子要素のいずれかがクリックされたら、何らかのコードを実行したい場合に使う
* 子要素一つ一つにイベントリスナーを設定せず、親要素のイベントリスナーを設定 → 子要素のイベントリスナーからバブリングしてくる
* メリット：子要素が後から追加されたり、削除されても問題ない
* 例：リストアイテム。どれかがクリックされたらメッセージをポップアップ
  - 親の `<ul>`` 要素の click イベントリスナーに設定 → イベントはリストアイテムからバブリング
  - [イベントの移譲のサンプル色々](https://davidwalsh.name/event-delegate)

### イベントオブジェクト

* イベントの追加機能や情報を提供する目的で、イベントハンドラーに自動的に渡される
* 例えば
  - e.target: 要素そのもの
    - e.target.value
    - e.target.style.backgroundColor